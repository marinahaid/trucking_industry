{"version":3,"sources":["form.js"],"names":["document","addEventListener","form","getElementById","formAddError","input","parentElement","classList","add","formRemoveError","remove","emailTest","test","value","async","e","preventDefault","error","formReq","querySelectorAll","index","length","contains","getAttribute","checked","formValidate","formData","FormData","response","fetch","method","body","ok","result","json","alert","message","formPreview","innerHTML","reset"],"mappings":"AAAA,aAGEA,SAASC,iBAAiB,oBAAoB,WAC5C,IAAIC,EAAOF,SAASG,eAAe,QA2DnC,SAASC,EAAaC,GACpBA,EAAMC,cAAcC,UAAUC,IAAI,SAClCH,EAAME,UAAUC,IAAI,SAEtB,SAASC,EAAgBJ,GACvBA,EAAMC,cAAcC,UAAUG,OAAO,SACrCL,EAAME,UAAUG,OAAO,SAGzB,SAASC,EAAUN,GACjB,OAAQ,gDAAgDO,KAAKP,EAAMQ,OApErEX,EAAKD,iBAAiB,UAEtBa,eAAwBC,GACtBA,EAAEC,iBAEF,IAAIC,EA4BN,SAAsBf,GACpB,IAAIe,EAAQ,EACRC,EAAUlB,SAASmB,iBAAiB,QAExC,IAAK,IAAIC,EAAQ,EAAGA,EAAQF,EAAQG,OAAQD,IAAS,CACnD,MAAMf,EAAQa,EAAQE,GACtBX,EAAgBJ,GAEZA,EAAME,UAAUe,SAAS,SACvBX,EAAUN,KACZD,EAAaC,GACbY,MAEsC,aAA/BZ,EAAMkB,aAAa,UAA4C,IAAlBlB,EAAMmB,SAIxC,KAAhBnB,EAAMQ,SAHVT,EAAaC,GACbY,KAQJ,OAAOA,EAnDKQ,GAEZ,IAAIC,EAAW,IAAIC,SAASzB,GAG5B,GAAc,IAAVe,EAAa,CACff,EAAKK,UAAUC,IAAI,YACnB,IAAIoB,QAAiBC,MAAM,eAAgB,CACzCC,OAAQ,OACRC,KAAML,IAER,GAAIE,EAASI,GAAI,CACf,IAAIC,QAAeL,EAASM,OAC5BC,MAAMF,EAAOG,SACbC,YAAYC,UAAY,GACxBpC,EAAKqC,QACLrC,EAAKK,UAAUG,OAAO,iBAEtByB,MAAM,UACNjC,EAAKK,UAAUG,OAAO,iBAGxByB,MAAM","file":"form.min.js","sourcesContent":["\"use strict\";\n\n;(function () {\n  document.addEventListener('DOMContentLoaded', function () {\n    var form = document.getElementById('form');\n    form.addEventListener('submit', formSend);\n\n    async function formSend(e) {\n      e.preventDefault();\n\n      var error = formValidate(form);\n\n      let formData = new FormData(form);\n\n\n      if (error === 0) {\n        form.classList.add('_sending');\n        let response = await fetch('sendmail.php', {\n          method: 'POST',\n          body: formData\n        });\n        if (response.ok) {\n          let result = await response.json();\n          alert(result.message);\n          formPreview.innerHTML = '';\n          form.reset();\n          form.classList.remove('_sending');\n        } else {\n          alert(\"Ошибка\");\n          form.classList.remove('_sending');\n        }\n      } else {\n        alert('Заполните обязательные поля');\n      }\n\n    }\n\n\n    function formValidate(form) {\n      let error = 0;\n      let formReq = document.querySelectorAll('.req');\n\n      for (let index = 0; index < formReq.length; index++) {\n        const input = formReq[index];\n        formRemoveError(input);\n\n        if (input.classList.contains('email')) {\n          if (emailTest(input)) {\n            formAddError(input);\n            error++;\n          }\n        } else if (input.getAttribute(\"type\") === \"checkbox\" && input.checked === false) {\n          formAddError(input);\n          error++;\n        } else {\n          if (input.value === '') {\n            formAddError(input);\n            error++;\n          }\n        }\n      }\n      return error;\n    }\n    function formAddError(input) {\n      input.parentElement.classList.add('error');\n      input.classList.add('error');\n    }\n    function formRemoveError(input) {\n      input.parentElement.classList.remove('error');\n      input.classList.remove('error');\n    }\n    //Функция теста email\n    function emailTest(input) {\n      return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n    }\n  });\n})();\n"]}